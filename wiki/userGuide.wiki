#labels Featured
#The TMVS program user guide

= Introduction =

    # Input / Output file format
    # Config parameters
    # Command line instruction


= Details =

==Input / Output file format==

===Input file format===

Our input file format includes "nvm", "nvm2" and "mvs"

====nvm file format====
NVM file is come from [http://ccwu.me/vsfm/ VisualSFM] data structure.
Here is the example of the data structure. The detail can be found in [https://code.google.com/p/pais-mvs/source/browse/trunk/TMVS/io/fileloader.cpp FileLoader].

You can skip the calibration step and just use the Structure from Motion result output from [http://ccwu.me/vsfm/ VisualSFM].

{{{
NVM_V3 

5
pawn0013.jpg	614.095397949 0.705410371683 0.160690743319 0.671401589359 0.160605237544 -0.556085150075 0.0481223921551 -0.00781510757143 -0.199289312888 0 
pawn0010.jpg	616.175537109 0.90353903514 0.221746421078 0.3576944596 0.0806247263945 -0.880841878288 0.0327703491031 -0.684201024844 -0.209314043486 0 
pawn0011.jpg	612.03302002 0.85241383667 0.2037593266 0.469072019941 0.108830220502 -0.71971232163 0.0433857776889 -0.492035476323 -0.207263977174 0 
pawn0012.jpg	611.360473633 0.786507583571 0.183363764635 0.573952646995 0.135504187104 -0.608685012281 0.0487066227347 -0.263440114899 -0.203210786458 0 
pawn0014.jpg	617.585876465 0.611485687162 0.135944898976 0.757586998462 0.183482834469 -0.572254659063 0.0434025057556 0.255716172724 -0.198563271584 0 
}}}

The first row shows the NVM file version.

Third line "5" indicate there are 5 cameras in the following list.

Each list entry:

1. image file name, can be PNG, JPG, BMP, or any OpenCV supported image format. Note that the file path can be relative or absolute path. 

2. focal length

3. 4 elements vector (k wx wy wz) indicate the quaternion rotation. Transformation form quaternion to 3x3 rotation matrix can be found in code. [https://code.google.com/p/pais-mvs/source/browse/trunk/TMVS/mvs/camera.cpp#6 Camera].

4. 3 elements vector (x y z) indicate camera center in world coordinate.

5. radial distortion parameter

6. 0 for end of line


====nvm2 file format====
In the NVM file format, the camera principle point is assumed at the image center, and can't to be edit.

NVM2 file specify the principle point(px, py) after focal length. Others the same.
 
====mvs file format====
MVS file is saved in a binary way for internal use, for example: MVS viewer, patch filtering.

===Output file format===

Our output file format includes "mvs", "ply" and "psr"

====mvs file format====
====ply file format====
====psr file format====

==Config parameters==